#!/usr/bin/python
import argparse
import requests
import subprocess
import flask

app = flask.Flask(__name__, static_url_path='')


@app.route('/')
def hello():
    address = flask.request.args.get("address")
    return f'Output: {ping(address)}'

def ping(address):
    cmd = "ping -c 1 %s" % address
    output = subprocess.check_output(cmd, shell=True)
    return output

def main():
    global args
    parser = argparse.ArgumentParser(description="Ping Command", add_help=True)
    args = parser.parse_args()
    app.run(debug=True, host='0.0.0.0', port=10000, threaded=True)



if __name__ == '__main__':
    main()