import mysql.connector
from flask import Flask
import request
app = Flask(__name__)

db = mysql.connector.connect(host = 'mydb', user = 'root', password = 'password', port = 3306)

mysql = mysql.connector.connect(
  host="localhost",
  user="root",
  passwd="password",
  database="mysql"
)

@app.route('/mysql', methods=['GET', 'POST'])
def index():
    print (request.form)
    if request.method == "POST":
        y = ""
        details = request.form
        userName = details['fname']
        cur = mysql.cursor()
        print("SQL Statement: select * from user where User = '%s'" %userName)
        cur.execute("select * from user where User = '%s'" % (userName))
        myresult = cur.fetchall()
        for x in myresult:
            print(x)
        return ('ok')
    else:
        return ('not ok')
        
if __name__ == '__main__':
    app.run(host="0.0.0.0")
        


